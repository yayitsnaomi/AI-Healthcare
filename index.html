<style>
#header {
    width: 100%;
    background-color: green;
}
.container {
    width: 800px;
    margin: auto;
}
.h3{
	color: gray;
	font-size: 12px;
	font-style: italic;
}
#left {
    width: 450px;
    float: left;
    height: 250px;
    background-color: white;
}
#symptom{
	width: 450px;
    float: right;
    height: 250px;
    background-color: white;
}

a {
    color: black;
}
* {
    color: black;
}




</style>

<HTML>
    <HEAD>
	<TITLE>Eliza+</TITLE>
	
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pretty-checkbox@3.0/dist/pretty-checkbox.min.css"/>
	
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>
	
	<SCRIPT LANGUAGE="JavaScript" TYPE="text/javascript" SRC="js/elizabot.js"></SCRIPT>
	<SCRIPT LANGUAGE="JavaScript" TYPE="text/javascript" SRC="js/elizadata.js"></SCRIPT>	
	<SCRIPT LANGUAGE="JavaScript" TYPE="text/javascript" SRC="js/sentimood.js"></SCRIPT>
	<SCRIPT LANGUAGE="JavaScript" TYPE="text/javascript">	   

	 // Create variables for eliza bot, eliza's speech text output, and eliz's mood sentiment to change avatar
	 var eliza = new ElizaBot();
	 var elizaLines = new Array();
	 var sentiment = new Sentimood();

	 // set chat slize
	 var displayCols = 20;
	 var displayRows = 60;

	 var userSentiment = 0;
	 
	 // Load images for avatar to express different emotions
	 var imgs = {};
	 imgs[0] = "img/default-01.png";
	 imgs[1] = "img/happy1-01.png";
	 imgs[2] = "img/happy2-01.png";
	 imgs[3] = "img/happy3-01.png";
	 imgs[-1] = "img/sad1-01.png";
	 imgs[-2] = "img/sad2-01.png";
	 imgs[-3] = "img/sad3-01.png";
	 
	 function updateImage(val) {
	     // If continuing on same sentiment
	     if(val * userSentiment >= 0) {
		 if(val < 0) {
		     userSentiment -= 1;
		 }
		 if(val > 0) {
		     userSentiment += 1;
		 }
	     }
	     else {
		 // switch moods
		 userSentiment = val
	     }
	     
	     if(userSentiment < -3) {
		 userSentiment = -3
	     }
	     if(userSentiment > 3) {
		 userSentiment = 3
	     }

	     // Update image
	     document.getElementById('main-image').src = imgs[userSentiment];
	 }
	 
	  // Reset button functionality for Eliza+ chat screen
	 function elizaReset() {
	     userSentiment = 0;
	     eliza.reset();
	     elizaLines.length = 0;
	     elizaStep();
	 }

	 function elizaStep() {
	     var f = document.forms.e_form;
	     var userinput = f.e_input.value;
	     
	     //console.log(sentiment.analyze(userinput));
	     updateImage(sentiment.analyze(userinput)['score']);

	     if (eliza.quit) {
		 f.e_input.value = '';
		 if (confirm("This session is over.\nStart over?")) elizaReset();
		 f.e_input.focus();
		 return;
	     }
	     else if (userinput != '') {
		 var usr = 'YOU:   ' + userinput;
		 var rpl ='ELIZA: ' + eliza.transform(userinput);
		 elizaLines.push(usr);
		 elizaLines.push(rpl);

		 // Format text conversation on Eliza+ output
		 // (fit to textarea with last line free - reserved for extra line caused by word wrap)
		 var temp  = new Array();
		 var l = 0;
		 for (var i=elizaLines.length-1; i>=0; i--) {
		     l += 1 + Math.floor(elizaLines[i].length/displayCols);
		     if (l >= displayRows) break
		     else temp.push(elizaLines[i]);
		 }
		 elizaLines = temp.reverse();		 
		 f.e_display.value = elizaLines.join('\n');
	     }
	     else if (elizaLines.length == 0) {
		 // no input and no saved lines -> output initial
		 var initial = 'ELIZA: ' + eliza.getInitial();
		 elizaLines.push(initial);
		 f.e_display.value = initial + '\n';
	     }
	     f.e_input.value = '';
	     f.e_input.focus();
	 }

	</SCRIPT>
    </HEAD>



    <BODY onload="window.setTimeout('elizaReset()',100)">



			<div id="header">
		<div class='container'><center>How can we help you?!</center></div>
	</div>
	<div class='container'>
		<div id="left">
			<center>
			<H3>Dr. Bot</H3>

			<img id="doc-image" src="img/doctoravatar.png" width=150px height=200px></center>
			<H3>Please select your symptoms: </H3>
			<!-- primary -->
			<div class="pretty p-default">
					<input type="checkbox" />
					<div class="state p-primary">
						<label>Headache</label>
					</div>
				</div>
			
				<!-- success -->
				<div class="pretty p-default">
					<input type="checkbox" />
					<div class="state p-success">
						<label>Nausea</label>
					</div>
				</div>
			
				<!-- info -->
				<div class="pretty p-default">
					<input type="checkbox" />
					<div class="state p-info">
						<label>Bleeding</label>
					</div>
				</div>
			
				<!-- warning -->
				<div class="pretty p-default">
					<input type="checkbox" />
					<div class="state p-warning">
						<label>Fainting</label>
					</div>
				</div>
			
				<!-- danger -->
				<div class="pretty p-default">
					<input type="checkbox" />
					<div class="state p-danger">
						<label>xyz</label>
					</div>
				</div>
			</center>
		</div>
		
		<div id= "symptom">
				
		 
				<center>
				<H3>Eliza+</H3>
				<img id="main-image" src="img/default-01.png" width=250px height=250px>
				<TABLE>
				<FORM NAME="e_form" onsubmit="elizaStep();return false">
					<TR>
					<TD COLSPAN="3">
						<TEXTAREA class="form-control" NAME="e_display" COLS="60" ROWS="20"></TEXTAREA>
					</TD>
					</TR>
					<TR VALIGN="middle">
					<TD>
						<INPUT class="form-control" TYPE="text" NAME="e_input" SIZE="43">
					</TD>
					<TD ALIGN="left">
						<INPUT class="btn btn-default" TYPE="submit" VALUE="Talk">
					</TD>
					<TD ALIGN="right">
						<INPUT class="btn btn-default" TYPE="reset" VALUE="Reset" onClick="window.setTimeout('elizaReset()',100)">
					</TD>
					</TR>
				</FORM>
				</TABLE>
			</center>
		
	</div>

</div>

	</BODY>

</HTML>

